<Window
    xmlns="https://github.com/avaloniaui"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:models="using:ControleMateriais.Models"
    xmlns:vm="using:ControleMateriais.Desktop.ViewModels"
    x:Class="ControleMateriais.Desktop.Views.MainWindow"
        x:DataType="vm:MainWindowViewModel"
        Width="800" Height="450"
        Title="Controle de Materiais">

    <!-- Conteúdo central -->
    
<Grid Background="{DynamicResource Brush.Surface}">
  <Grid>
    <Border Background="{DynamicResource Brush.SurfaceAlt}"
            BorderBrush="{DynamicResource Brush.Border}"
            BorderThickness="1"
            CornerRadius="10"
            BoxShadow="0 8 24 0 #80000000"
            Padding="16">

      <Grid RowDefinitions="Auto,*">
        <!-- Cabeçalho: total central + botão à direita -->
        <Grid ColumnDefinitions="*,Auto" Margin="0,0,0,12">

          <!-- Botão onde tem a tabela de preços -->
          <Button Grid.Column="0"
                  Content="Tabela de Preços"
                  HorizontalAlignment="Left"
                  Click="OnAbrirTabelaPrecosClick"/>

          <!-- Total centralizado --> 
          <TextBlock Grid.ColumnSpan="2"
                     Classes="h1"
                     HorizontalAlignment="Center"
                     Text="{Binding TotalGeral, StringFormat={}{0:C}}"/>

          <!-- Botão para exportar em PDF -->
          <Button Grid.Column="1"
                  Classes="primary"
                  Content="Exportar"
                  Command="{Binding ExportarCommand}"/>
        </Grid>

        <!-- DataGrid -->
        <DataGrid Grid.Row="1"
                  ItemsSource="{Binding Itens}"
                  AutoGenerateColumns="False"
                  IsReadOnly="False">
          <DataGrid.Columns>
            <DataGridTextColumn Header="Material"
                                x:DataType="models:MaterialItem"
                                Binding="{Binding Nome}"
                                IsReadOnly="True"
                                Width="2*"/>

            <DataGridTextColumn Header="Peso atual (kg)"
                                x:DataType="models:MaterialItem"
                                Binding="{Binding PesoAtual, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:N3}}"
                                IsReadOnly="False"
                                Width="*"/>

            <DataGridTextColumn Header="Preço por kg"
                                x:DataType="models:MaterialItem"
                                Binding="{Binding PrecoPorKg, Mode=OneWay, StringFormat={}{0:C}}"
                                IsReadOnly="True"
                                Width="*"/>

            <DataGridTextColumn Header="Total"
                                x:DataType="models:MaterialItem"
                                Binding="{Binding Total, Mode=OneWay, StringFormat={}{0:C}}"
                                IsReadOnly="True"
                                Width="*"/>
          </DataGrid.Columns>
        </DataGrid>
      </Grid>

    </Border>
  </Grid>
</Grid>


</Window>