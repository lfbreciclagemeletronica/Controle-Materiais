<Window xmlns="https://github.com/avaloniaui"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:vm="using:ControleMateriais.Desktop.ViewModels"
        xmlns:models="using:ControleMateriais.Models"
        x:Class="ControleMateriais.Desktop.Views.PriceTableWindow"
        x:DataType="vm:PriceTableViewModel"
        Width="680" Height="460"
        Title="Tabela de Preços"
        FontFamily="avares://Avalonia.Fonts.Inter#Inter">

  <Border Background="{DynamicResource Brush.Surface}" Padding="16">
    <Grid RowDefinitions="Auto,*,Auto">
      <!-- Cabeçalho: competência -->
      <StackPanel Orientation="Horizontal" Spacing="8">
        <TextBlock Text="Competência (mês/ano):"
                   VerticalAlignment="Center"
                   Foreground="{DynamicResource Brush.TextPrimary}"/>
        <DatePicker SelectedDate="{Binding Competencia, Mode=TwoWay}"
                    Width="180"/>
      </StackPanel>

      <!-- Grade de preços -->
      <Border Grid.Row="1"
              Background="{DynamicResource Brush.SurfaceAlt}"
              BorderBrush="{DynamicResource Brush.Border}"
              BorderThickness="1"
              CornerRadius="8"
              Padding="8">
        <DataGrid ItemsSource="{Binding Precos}"
                  AutoGenerateColumns="False"
                  IsReadOnly="False">
          <DataGrid.Columns>
            <DataGridTextColumn Header="Material"
                                x:DataType="models:MaterialItem"
                                Binding="{Binding Nome}"
                                IsReadOnly="True"
                                Width="2*"/>
            <DataGridTextColumn Header="Preço por kg"
                                x:DataType="models:MaterialItem"
                                Binding="{Binding PrecoPorKg, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged, StringFormat={}{0:C}}"
                                Width="*"/>
          </DataGrid.Columns>
        </DataGrid>
      </Border>

      <!-- Ações -->
      <StackPanel Grid.Row="2"
                  Orientation="Horizontal"
                  HorizontalAlignment="Right"
                  Spacing="8">
        <Button Content="Fechar" Command="{Binding FecharCommand}"/>
        <Button Content="Salvar (JSON)" Classes="primary" Command="{Binding SalvarCommand}"/>
      </StackPanel>
    </Grid>
  </Border>

</Window>